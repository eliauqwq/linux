# 文件命令之——sed
`sed`——(stream editor)，流编辑器，是linux中的一个高效的文件编辑器，可以快速地对文件进行数据提取、数据修改
等操作。

## sed的基本语法
```
sed [功能选项] '指定操作' /文件路径
```

## sed的常见选项
- `-n`：静默模式，只显示与模式匹配的行。常常与打印命令一起使用。
- `-i`：直接修改文件内容，**使用时需要非常的小心**。sed默认将处理后的内容输出到终端上。
- `-e`：执行多个sed任务。

## sed的常见操作
**1. 交换两个匹配模式**：
```
sed 's/one/other/' file
```
`s`——subsitute，表示将每行的**第一个one**替换成other，如果想要替换所有的one，则在操作末尾添加'g'：
```
sed 's/one/other/g' file
```

**2. 打印匹配模式的行**：
```
sed -n '/hello/p' file
```
`p`——print，我们上面已经提到了，`-n`静默模式只显示匹配到的行，如果我们不加上这个选项的话，sed会打印整个文件内容并且把匹配到的行再打印一边。

**3. 删除匹配到的行**：
```
sed '/error/d' file
```
`d`——delete，删除所有匹配到error的行。

**4. 插入或者追加**：
```
sed '3i\ hello' file
sed '3a\ hello' file
```
- `i`：insert，插入
- `a`：append，追加
分别表示在第三行之前和之后加入hello这一行。

**5. 捕获组**：
假如我们要操作的文件是如下的
```
alice 13
bob 14
```
我们希望捕获文件中的字符串和年龄，可以利用sed命令中的捕获组来完成。
```
sed 's/\([A-Za-z]*\) \([0-9]*\)/ Name:\1  Age:\2/p' txt
```
在sed命令中，我们使用\(和\)来捕获内容，并在后续用`\1`、`\2`来引用捕获到的内容。在这个例子当中我们利用正则表达式捕获到了一个字符串和一个数字，然后利用`s`命令将后面格式的语句与原本的进行交换，最后再用`p`命令打印，就能得到我们想要的格式。

当然我们也是可以用awk命令来完成的：
```
awk '{print "name: "$1 ",age: "$2}' file
```

## 注意事项
- 首先要注意的是`-i`这个选项的使用，他会直接将操作后的内容传入原文件内，因此需要小心使用。

- 在' '内的模式分隔符我们使用了`/`，但当我们模式串内自带`/`(例如某个路径`/path/to`)或者替换命令中出现变量替换时我们就要用`#`来做分隔符，例如：
```
old=65
new=15
sed 's#$old#$new#' file
```
**这种情况仅限于使用替换命令`s`时**
